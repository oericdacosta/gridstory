# Configuração do PitWall AI

# Diretórios de dados
data:
  raw:
    base_dir: "data/raw"
    races_dir: "data/raw/races"
    calendar_dir: "data/raw/calendar"
  processed:
    base_dir: "data/processed"
  timelines:
    base_dir: "data/timelines"
  models:
    base_dir: "data/models"
  ml:
    races_dir: "data/ml/races"

# Cache do FastF1
cache:
  enabled: true
  dir: "~/.cache/fastf1"  # ~ será expandido para home do usuário

# Extração de dados
extraction:
  # Timeout padrão para download de dados (em segundos)
  timeout: 300

  # Polling para corridas recentes
  polling:
    max_retries: 10
    retry_interval: 300  # 5 minutos em segundos

  # Telemetria
  telemetry:
    # Colunas críticas a extrair
    columns:
      - Time
      - Speed
      - RPM
      - Throttle
      - Brake
      - nGear
      - DRS
      - Distance

# Dados de voltas
laps:
  # Colunas críticas a extrair
  critical_columns:
    - Driver
    - DriverNumber
    - LapNumber
    - Compound
    - TyreLife
    - FreshTyre
    - IsAccurate
    - Stint
    - Team
    - TrackStatus
    - Position

# Clima
weather:
  # Colunas a extrair
  columns:
    - Time
    - AirTemp
    - TrackTemp
    - Rainfall
    - WindSpeed
    - Humidity
    - Pressure

# Logging
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

# Pré-processamento
preprocessing:
  # Interpolação de telemetria
  interpolation:
    num_points: 5000  # Número de pontos no grid sincronizado

  # Processamento de sinal
  signal_processing:
    median_filter_kernel_size: 5
    savgol_kernel_size: 11
    savgol_polyorder: 3
    outlier_threshold: 3.0  # Desvios padrão para detecção de outliers

  # Imputação de valores ausentes
  imputation:
    strategy: "median"  # Opções: mean, median, mode, knn
    use_knn: false

  # Codificação de variáveis categóricas
  encoding:
    drop_first: true  # Evitar multicolinearidade em one-hot encoding

  # Escalonamento de features
  scaling:
    type: "robust"  # Opções: standard, minmax, robust

# ML Pipeline
ml:
  # Random state global para reprodutibilidade
  random_state: 42

  # Ruptures - Detecção de degradação
  degradation:
    algorithm: "Pelt"
    penalty: 3

  # Isolation Forest - Anomalias
  anomaly:
    contamination: 0.05  # Padrão: 5% (RESOLVIDO: era 0.1 no config antigo, 0.05 no código)
    n_estimators: 100
    # Perfis de contaminação por tipo de corrida
    contamination_profiles:
      clean: 0.03      # Corrida limpa, sem incidentes (3%)
      normal: 0.05     # Corrida padrão (5%)
      chaotic: 0.10    # Corrida com muitos safety cars/incidentes (10%)

  # Clustering
  clustering:
    algorithm: "KMeans"
    n_clusters: 3
    k_range_min: 2      # Mínimo de clusters para análise
    k_range_max: 6      # Máximo de clusters para análise

  # DBSCAN
  dbscan:
    min_samples: 3
    eps: 0.5

# API (futuro)
api:
  host: "0.0.0.0"
  port: 8000
  reload: false

# LLM (futuro)
llm:
  model: "gpt-4"
  temperature: 0.7
  max_tokens: 2000
